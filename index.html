<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Copier au clic depuis JSON</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; }
    h1 { margin-top: 2rem; }
    h2 { margin-top: 1.5rem; color: #444; }
    a.copy-link {
      color: blue;
      cursor: pointer;
      text-decoration: underline;
      margin-right: 1rem;
      display: inline-block;
      margin-top: 0.2rem;
    }
  </style>
</head>
<body>
  <h1>Liste des jeux et catégories</h1>
  <div id="content">Chargement des données...</div>

  <script>
    async function loadData() {
      try {
        const response = await fetch('data.json');
        if (!response.ok) throw new Error("Erreur chargement JSON");
        const data = await response.json();

        const container = document.getElementById('content');
        container.innerHTML = '';

        // Parcourir groupes (jeux)
        for (const [game, subgroups] of Object.entries(data)) {
          const h1 = document.createElement('h1');
          h1.textContent = game;
          container.appendChild(h1);

          // Parcourir sous-groupes (titres 2)
          for (const [subgroup, categories] of Object.entries(subgroups)) {
            const h2 = document.createElement('h2');
            h2.textContent = subgroup;
            container.appendChild(h2);

            // Parcourir catégories
            for (const [category, code] of Object.entries(categories)) {
              const p = document.createElement('p');
              p.textContent = `${category} : `;

              const a = document.createElement('a');
              a.textContent = code;
              a.href = '#';
              a.className = 'copy-link';
              a.onclick = e => {
                e.preventDefault();
                copyText(code);
              };

              p.appendChild(a);
              container.appendChild(p);
            }
          }
        }
      } catch (e) {
        document.getElementById('content').textContent = 'Erreur : ' + e.message;
      }
    }

    function copyText(text) {
      navigator.clipboard.writeText(text).then(() => {
        alert(`Texte copié dans le presse-papier : ${text}`);
      }).catch(() => {
        alert('Erreur lors de la copie.');
      });
    }

    loadData();
  </script>
</body>
</html>
